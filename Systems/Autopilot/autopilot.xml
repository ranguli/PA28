<?xml version="1.0"?>
<!-- This autopilot file switches between S-TEC-55X and KAP140 -->
<PropertyList>
	<filter>
		<name>AILERON OUTPUT</name>
		<type>noise-spike</type>
		<enable>
			<condition>
				<or>
					<and>
						<greater-than>
							<property>/it-stec55x/output/roll</property>
							<value>-1</value>
						</greater-than>
						<equals>
							<property>/it-stec55x/internal/servo-roll-power</property>
							<value>1</value>
						</equals>
						<equals>
							<property>/it-stec55x/settings/use-controls-flight</property>
							<value>1</value>
						</equals>
						<equals>
							<property>/options/autopilot</property>
							<value>S-TEC-55X</value>
						</equals>
					</and>
					<and>
						<property>/KAP140/locks/roll-axis</property>
						<equals>
							<property>/options/autopilot</property>
							<value>KAP140</value>
						</equals>
					</and>
				</or>
			</condition>
		</enable>
		<input>
			<condition>
				<and>
					<greater-than>
						<property>/it-stec55x/output/roll</property>
						<value>-1</value>
					</greater-than>
					<equals>
						<property>/it-stec55x/internal/servo-roll-power</property>
						<value>1</value>
					</equals>
					<equals>
						<property>/it-stec55x/settings/use-controls-flight</property>
						<value>1</value>
					</equals>
					<equals>
						<property>/options/autopilot</property>
						<value>S-TEC-55X</value>
					</equals>
				</and>
			</condition>
			<expression>
				<product>
					<sum>
						<property>/it-stec55x/internal/aileron-pi</property>
						<property>/it-stec55x/internal/aileron-d</property>
					</sum>
					<property>/it-stec55x/settings/gain-roll</property>
				</product>
			</expression>
		</input>
		<input>
			<condition>
				<and>
					<property>/KAP140/locks/roll-axis</property>
					<equals>
						<property>/options/autopilot</property>
						<value>KAP140</value>
					</equals>
				</and>
			</condition>
			<property>/KAP140/aileron-cmd</property>
		</input>
		<output>/controls/flight/aileron</output>
		<max-rate-of-change>0.5</max-rate-of-change>
	</filter>
	<filter>
		<name>ELEVATOR OUTPUT</name>
		<debug>false</debug>
		<type>noise-spike</type>
		<enable>
			<condition>
				<or>
					<and>
						<greater-than>
							<property>/it-stec55x/output/pitch</property>
							<value>-1</value>
						</greater-than>
						<equals>
							<property>/it-stec55x/internal/servo-pitch-power</property>
							<value>1</value>
						</equals>
						<equals>
							<property>/it-stec55x/settings/use-controls-flight</property>
							<value>1</value>
						</equals>
						<equals>
							<property>/options/autopilot</property>
							<value>S-TEC-55X</value>
						</equals>
					</and>
					<and>
						<property>/KAP140/locks/pitch-axis</property>
						<equals>
							<property>/options/autopilot</property>
							<value>KAP140</value>
						</equals>
					</and>
				</or>
			</condition>
		</enable>
		<input>
			<condition>
				<and>
					<greater-than>
						<property>/it-stec55x/output/pitch</property>
						<value>-1</value>
					</greater-than>
					<equals>
						<property>/it-stec55x/internal/servo-pitch-power</property>
						<value>1</value>
					</equals>
					<equals>
						<property>/it-stec55x/settings/use-controls-flight</property>
						<value>1</value>
					</equals>
					<equals>
						<property>/options/autopilot</property>
						<value>S-TEC-55X</value>
					</equals>
				</and>
			</condition>
			<expression>
				<product>
					<property>/it-stec55x/internal/elevator-pi</property>
					<property>/it-stec55x/settings/gain-pitch</property>
				</product>
			</expression>
		</input>
		<input>
			<condition>
				<and>
					<property>/KAP140/locks/pitch-axis</property>
					<equals>
						<property>/options/autopilot</property>
						<value>KAP140</value>
					</equals>
				</and>
			</condition>
			<property>/KAP140/elevator-cmd</property>
		</input>
		<output>/controls/flight/elevator</output>
		<max-rate-of-change>0.5</max-rate-of-change>
	</filter>
</PropertyList>
